package com.droidz.homemanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ListView;

import com.droidz.homemanager.R;

public class HomeManagerList extends Activity {
	private void showGetMoreLaunchersDialog() {
		AlertDialog.Builder builder = new AlertDialog.Builder(this);
		builder.setMessage(R.string.get_more_launchers);
		builder.setPositiveButton("Ok", 
				new DialogInterface.OnClickListener() {

					@Override
					public void onClick(DialogInterface dialog, int which) {
						
					}
		});		
		
		AlertDialog alertDialog = builder.create();
		alertDialog.show();
	}
    
    @Override
    protected void onStart() {
    	super.onStart();
    	HomeManager homeManager = new HomeManager(this);
    	
	    HomeManagerListAdapter adapter = new HomeManagerListAdapter(this,
	        	R.layout.row, homeManager.getLaunchers(), homeManager);
	        
	    ListView listView = (ListView)findViewById(R.id.homemanager_list);
	    listView.setAdapter(adapter);
	    
	    if(homeManager.getNumberOfLaunchersInstalled() > 1) {
		    if(!homeManager.defaultFound) {
		    	Intent launchHome = new Intent(Intent.ACTION_MAIN);
		    	launchHome.addCategory(Intent.CATEGORY_HOME);
		    	
		    	startActivity(launchHome);
		    }
	    }
	    else
	    	showGetMoreLaunchersDialog();
    }
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        
        setContentView(R.layout.activity_home_manager__list);
    }
}
